[Main]
# mode values: tornado, opencv, deploy
mode = deploy
port = 9090
html_dir_path = ./webpage
detector = yolov5
tracker = sort
reid = torchreid

[Input]
# type values: webcam, images, video, hls
type = hls
webcam_device_nr = 0
images_dir_path = ./data/annotated/test/img1
video_file_path = ./data/videos/venice.mp4
hls_url = https://tracktech.ml:50008/stream.m3u8
camera_id = test id

[Orchestrator]
sec_url = wss://tracktech.ml:50010/processor
url = ws://tracktech.ml:50010/processor
local_url = ws://localhost:80/processor

[Yolov5]
source_path = ./data/videos/short_venice.mp4
weights_path = ./yolov5s.pt
img-size = 640
conf-thres = 0.25
iou-thres = 0.45
device = 0
classes
agnostic-nms = false
augment = false
update = false
project = runs/detect
name = exp
exist-ok = false

[Yolor]
source_path = ./data/videos/venice.mp4
weights_path = ./yolor_p6.pt
cfg_path = ./processor/pipeline/detection/yolor/cfg/yolor_p6.cfg
names_path = ./coco.names
img-size = 640
conf-thres = 0.25
iou-thres = 0.45
device = 0
classes
agnostic-nms = false
augment = false
stride = 64

[Filter]
targets_path = ./filter.names

[TorchReid]
size = (256, 128)
model_name = osnet_x1_0
weights_dir_path = ./processor/pipeline/reidentification/torchreid/weights
device = cuda
threshold = 10.5
distance = euclidean

[FastReid]
size = (256, 128)
weights_dir_path = ./processor/pipeline/reidentification/fastreid/weights
config_file_path = ./processor/pipeline/reidentification/fastreid_config.yml
parallel = False
threshold = 0.97
distance = cosine

[SORT]
max_age = 30
min_hits = 0
iou_threshold = 0.3

[Training]
# mode_det values: yolov5, yolor
mode_det = yolor
# mode_reid values: torch, fast
mode_reid = fast
file = /train.py

[Training_Yolov5]
data = /data/coco128.yaml
cfg = /models/yolov5s.yaml
weights = \'\'
batch-size = 4
hyp = /data/hyp.scratch.yaml

[Training_Yolor]
multi-gpu = False
data = /data/coco.yaml
cfg = /cfg/yolor_p6.cfg
img = 1280 1280
device = 0
name = yolor_p6
weights = \'\'
batch-size = 4
hyp = /data/hyp.scratch.1280.yaml
epochs = 300

[Training_Torchreid]
root = ../../../data/annotated
sources = market1501
targets = market1501
width = 256
height = 128
batch_size_train = 32
batch_size_test = 100
model = resnet50
save_dir = log/resnet50
max_epoch = 60
eval_freq = 10
print_freq = 10

[Training_Fastreid]
num_gpus = 1
config_file = /configs/Market1501/bagtricks_R50.yml
model_device = cuda
device_number = 0

[Accuracy]
detector = yolov5
tracker = sort
source_path = ./data/annotated/test/img1
det_path = ./data/annotated/test/det/configtest.json
gt_path = ./data/annotated/COCO/annotations/instances_val2017.json
image_path = ./data/annotated/COCO/images/
plots_path = ./data/plots
plots_prefix = ohno
image_count = 50
det_format = COCO
categories = person
nr_frames = 50
